@{
    ViewData["Title"] = "Home page";
}

<script>

    function onStatusChanged(response) {  // Called with the results from FB.getLoginStatus().
        alert('hi');
        console.log('onStatusChanged');
        console.log(response);                   // The current login status of the person.
        if (response.status === 'connected') {   // Logged into your webpage and Facebook.
            testAPI();
        } else {                                 // Not logged into your webpage or we are unable to tell.
            document.getElementById('status').innerHTML = 'Please log ' +
                'into this webpage.';
        }
    }

    function checkLoginState() {               // Called when a person is finished with the Login Button.
        FB.getLoginStatus(onStatusChanged);
    }

    function testAPI() {                      // Testing Graph API after login.  See onStatusChanged() for when this call is made.
        console.log('Welcome!  Fetching your information.... ');
        FB.api('/me', function (response) {
            console.log('Successful login for: ' + response.name);
            document.getElementById('status').innerHTML =
                'Thanks for logging in, ' + response.name + '!';
        });
    }
    
    window.fbAsyncInit = function () {
        FB.init({
            appId: '1363432377195073',
            status: true,
            cookie: true,
            xfbml: true,
            version: 'v6.0'
        });

        FB.Event.subscribe('auth.logout', function (response) {            
            onStatusChanged(response);
        });

        FB.Event.subscribe('auth.statusChange', function (response) {            
            onStatusChanged(response);
        });

        checkLoginState();
    };

    
</script>
<script async defer src="https://connect.facebook.net/ko_KR/sdk.js"></script>

<div class="text-center">
    <h1 class="display-4">Welcome to my house</h1>
    <p>Learn about <a href="https://docs.microsoft.com/aspnet/core">building Web apps with ASP.NET Core</a>.</p>
</div>

<div class="fb-login-button" data-width="" data-size="small" data-button-type="login_with" data-layout="default" data-auto-logout-link="true" data-use-continue-as="true" onlogout="checkLoginState();"></div>

<div id="status">
</div>
